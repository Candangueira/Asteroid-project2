<%- include ('./partials/header') %>

<h3> List of Asteroids </h3>

 <!-- Adds a specific date based on the closest approach to Earth -->

<p>Select the date to retrieve a list os Asteroids based on their closest approach to Earth</p>

<form id="newDate" action="/asteroids" method="GET">
    <label>Date:</label>
    <input type="date" required name="initialDate">
    <label>until:</label>
    <input type="date" required name="endDate">
    <input type="submit" value="add-date">
</form>


 <!-- // NASA API ASTEROIDS //  ------------------------------------------------------------------->

<% dates.forEach((date)=> { %>
    <br>

    <b><%= date %></b>
    <br>
    <% asteroidsData[date].forEach((asteroid) => { %>
        
        <img src="../images/NASA-Logo-Large.png" alt="nasa-logo">
        <a href="/asteroids/<%=asteroid.id%>" text-decoration:none >
        <div class="container my-4 flex-shrink-0"> <a href="#" class="btn d-block w-100 d-sm-inline-block btn-light"><%= asteroid.name.slice(1,-1).replace('(',' ') %></a>
        </div>
            <p>Magnitude: <%= asteroid.absolute_magnitude_h %>
            </p>
            <p>Diameter: <%= asteroid.estimated_diameter.meters.estimated_diameter_min %>
            </p>
            <p>Is Hazardous?: <%= asteroid.is_potentially_hazardous_asteroid %>
            </p>
            <p>Day it will be closest to the Earth: <%= date %></p>
        
     
   <% }); %>
<% }); %>


<!-- // USER ASTEROIDS // ------------------------------------------------------------------------> 

    <% userAddedAsteroids.forEach((asteroid)=> {  %>
    <td class="asteroid-user"><img alt="avatar" src="<%= asteroid.userAvatar %>" referrerpolicy="no-referrer"></td>
    <h5 class="profile-name">added by:<%= asteroid.userName %></h5>
    <div class="user-asteroid">
        <a href="/asteroids/<%=asteroid._id%>">
            <h3>Name: <%= asteroid.name %></h3>
        </a>
            <p>Magnitude: <%= asteroid.magnitude %></p>
            <p>Diameter: <%= asteroid.diameter %></p>
            <p>Is Hazardous?: <%= asteroid.hazardous %></p>
            <p>Day it will be closest to the Earth: <%= asteroid.date.getUTCMonth() + 1 +"/"+asteroid.date.getUTCDate()+"/"+asteroid.date.getUTCFullYear(); %></p>
    </div>
    <% }); %>

<%- include ('./partials/footer') %>